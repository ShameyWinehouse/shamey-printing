import{f as F,r as o,o as m,c as g,a as e,b as t,w as n,d as f,F as E,e as _,g as T,t as p,h as K,i as z,j as H,k as j,l as G,m as J,n as W}from"./vendor.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))d(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function c(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function d(i){if(i.ep)return;i.ep=!0;const l=c(i);fetch(i.href,l)}})();const Y="/ui/dist/assets/book.png",Q="/ui/dist/assets/newspaper.png",X="/ui/dist/assets/card.png",Z=(s,r)=>{const c=s.__vccOpts||s;for(const[d,i]of r)c[d]=i;return c};class ${constructor(r,c,d){this.url=r,this.altText=c,this.index=d}}const ee={data(){return{config:null,locationId:"",viewCreate:!1,viewCreateTypeAndArrangement:!1,viewCreateDetailsAndPages:!1,createType:"",createArrangement:void 0,pages:[],formAddPage:{url:"",alt:""},dialogAddPage:!1,printableTitle:"",printableDescription:"",maxNumPages:20,createTypeRules:[s=>s?!0:"Type is required."],createArrangementRules:[s=>s?!0:"Layout arrangement is required."],printableTitleRules:[s=>s?!0:"Title is required.",s=>s?.length<=50?!0:"Title must be less than 50 characters.",s=>s?.length>=10?!0:"Title must be more than 10 characters."],printableDescriptionRules:[s=>s?!0:"Description is required.",s=>s?.length<=100?!0:"Description must be less than 100 characters.",s=>s?.length>=10?!0:"Description must be more than 10 characters."],pageUrlRules:[s=>(console.log("foo",s),s?!0:"URL is required."),s=>s?.length>=5?!0:"URL must be more than 5 characters."],pageAltTextRules:[s=>s?!0:"Alt text is required.",s=>s?.length<=1e3?!0:"Alt text must be less than 1000 characters.",s=>s?.length>=10?!0:"Alt text must be more than 10 characters."],viewPrintExisting:!1,tab:null,headers:[{title:"Title",align:"start",key:"title"},{title:"Description",align:"start",key:"description"},{title:"Copies Printed",align:"end",key:"countPrinted"},{title:"Date Created",align:"end",key:"dateCreated"},{title:"Creator",align:"start",key:"publisher"},{text:"",key:"controls",sortable:!1}],existingBooks:[],existingNewspapers:[],existingCards:[]}},mounted(){let s=this;window.addEventListener("message",this.onMessage),window.addEventListener("keyup",function(r){r.key=="Escape"&&s.fireEvent("closeAll")})},destroyed(){window.removeEventListener("message"),window.removeEventListener("keyup")},methods:{onMessage(s){if(s.data.type==="view"){if(this.config=s.data.config,this.locationId=s.data.locationId,s.data.screen==="create")this.viewCreate=!0,this.viewCreateTypeAndArrangement=!0;else if(s.data.screen==="printExisting"){this.viewPrintExisting=!0,this.existingBooks=[],this.existingNewspapers=[],this.existingCards=[];for(let d of s.data.existingPrintables){var r=d.dateCreated,c=new Date(0);c.setUTCMilliseconds(r),d.dateCreated=c,d.type=="book"?this.existingBooks.push(d):d.type=="newspaper"?this.existingNewspapers.push(d):d.type=="card"&&this.existingCards.push(d)}}}s.data.type==="close"&&(this.viewCreate=!1,this.viewCreateTypeAndArrangement=!1,this.viewCreateDetailsAndPages=!1,this.viewPrintExisting=!1)},fireEvent(s,r={}){fetch(`https://${GetParentResourceName()}/`+s,{method:"POST",body:JSON.stringify(r)})},async submitTypeAndArrangement(s){const{valid:r,errors:c}=await s;r&&this.arrangementSelected()},arrangementSelected(){this.viewCreateTypeAndArrangement=!1,this.viewCreateDetailsAndPages=!0},async addPage(s){const{valid:r,errors:c}=await s;r&&(this.dialogAddPage=!1,this.submitNewPage(),this.$refs.formCreateAddPage.reset())},submitNewPage(){if(this.pages.length>=this.maxNumPages)return;let s=this.pages.length+1;this.pages.push(new $(this.formAddPage.url,this.formAddPage.alt,s))},async publish(s){const{valid:r,errors:c}=await s;r&&(this.pages.length<1||this.pages.length>this.maxNumPages||(this.fireEvent("publish",{type:this.createType,title:this.printableTitle,description:this.printableDescription,arrangement:this.createArrangement,pages:this.pages,locationId:this.locationId}),this.pages=[],this.printableTitle="",this.printableDescription="",this.viewCreate=!1,this.viewCreateTypeAndArrangement=!1,this.viewCreateDetailsAndPages=!1,this.$refs.formCreate.reset()))},printExisting(s){this.fireEvent("print",{printableId:s.id,locationId:this.locationId})},format:F},watch:{createType:function(s,r){s=="book"?this.maxNumPages=20:s=="newspaper"?this.maxNumPages=12:(this.maxNumPages=1,this.createArrangement="VerticalInfinite")}}},te=e("header",null,null,-1),se={key:0,class:"wrapper ma-5"},ie={class:"printing-box"},ne={class:"float-right mr-7 mt-2"},re={class:"printing-create"},ae=e("div",{class:"mx-5"},[e("h1",{class:"font-rdr text-center ml-5 mr-5"},"Printing Press")],-1),le=e("hr",null,null,-1),oe={key:0},de=e("div",{class:"mb-4"},[e("span",{class:"text-h6"},"Type")],-1),ue=e("div",null,[e("strong",null,"Book")],-1),ce=e("div",{class:"type-item-thumbnail-container"},[e("img",{class:"type-item-thumbnail",src:Y})],-1),me={class:"type-max-pages-text note-text"},pe=e("div",null,[e("strong",null,"Newspaper")],-1),ge=e("div",{class:"type-item-thumbnail-container"},[e("img",{class:"type-item-thumbnail",src:Q})],-1),_e={class:"type-max-pages-text note-text"},fe=e("div",null,[e("strong",null,"Card")],-1),he=e("div",{class:"type-item-thumbnail-container"},[e("img",{class:"type-item-thumbnail",src:X})],-1),ve={class:"type-max-pages-text note-text"},be=e("div",{class:"mb-4"},[e("span",{class:"text-h6"},"Page Layout Arrangement")],-1),xe=e("div",null,[e("div",null,[e("strong",null,"Infinite Vertical")]),e("div",{class:"note-text"}," All pages are shown at once, lined up from top to bottom. No page-turning. ")],-1),ye=e("div",null,[e("div",null,[e("strong",null,"One Page at a Time")]),e("div",{class:"note-text"}," Readers see one page at a time, and flip to see the next page. ")],-1),we=e("div",null,[e("div",null,[e("strong",null,"Two Pages at a Time")]),e("div",{class:"note-text"}," Readers see two pages at a time (i.e. in pairs). They flip to see the next pair. ")],-1),Pe={key:1},ke=e("div",{class:"mb-8"},[e("div",{class:"text-h6"},"Create New Printable"),e("div",{class:"text-caption"},'Warning: Once you click "Publish", nothing here can ever be edited again.')],-1),Ae={class:"list-pages"},Ce={class:"d-flex flex-column mb-6"},Te={class:"text-h6 mb-1"},Ve={class:"list-pages-page-item-thumb-container"},Re=["src"],Ne={key:0},Ee={class:"float-right mt-2"},De={class:"my-2"},Ue={key:1,class:"wrapper ma-5"},Se={class:"printing-box"},Le={class:"float-right mr-7 mt-2"},qe={class:"printing-printExisting"},Be=e("div",{class:"mx-5"},[e("h1",{class:"font-rdr text-center ml-5 mr-5"},"Printing Press")],-1),Ie=e("hr",null,null,-1),Oe=e("div",null,[e("div",{class:"mb-8"},[e("div",{class:"text-h6"},"Print Existing Printable"),e("div",{class:"text-caption"},"Select the existing printable that you want to print. You must have the needed supplies already in your pocket.")])],-1),Me={key:0,class:"mt-3 mb-2 recipe-text-container text-center"},Fe={class:"recipe-text"},Ke={key:0,class:"mt-3 mb-2 recipe-text-container text-center"},ze={class:"recipe-text"},He={key:0,class:"mt-3 mb-2 recipe-text-container text-center"},je={class:"recipe-text"};function Ge(s,r,c,d,i,l){const u=o("v-btn"),h=o("v-col"),v=o("v-row"),b=o("v-radio"),V=o("v-radio-group"),y=o("v-divider"),w=o("v-form"),x=o("v-text-field"),D=o("v-list-item"),U=o("v-list"),S=o("v-card-text"),L=o("v-spacer"),q=o("v-card-actions"),B=o("v-card"),I=o("v-dialog"),R=o("v-container"),P=o("v-tab"),O=o("v-tabs"),k=o("v-icon"),A=o("v-data-table"),C=o("v-tabs-window-item"),M=o("v-tabs-window");return m(),g(E,null,[te,e("main",null,[i.viewCreate?(m(),g("div",se,[e("div",ie,[e("div",ne,[t(u,{variant:"text",onClick:r[0]||(r[0]=a=>l.fireEvent("closeAll"))},{default:n(()=>[_("x")]),_:1})]),e("div",re,[t(R,{class:"ma-5 w-auto pl-10 pr-11 py-3"},{default:n(()=>[t(v,null,{default:n(()=>[t(h,{"align-self":"center"},{default:n(()=>[ae]),_:1})]),_:1}),t(v,null,{default:n(()=>[t(h,null,{default:n(()=>[le]),_:1})]),_:1}),t(v,null,{default:n(()=>[t(h,null,{default:n(()=>[i.viewCreateTypeAndArrangement?(m(),g("div",oe,[t(w,{ref:"formTypeAndArrangement","validate-on":"submit",onSubmit:T(l.submitTypeAndArrangement,["prevent"])},{default:n(()=>[de,t(V,{modelValue:i.createType,"onUpdate:modelValue":r[1]||(r[1]=a=>i.createType=a),rules:i.createTypeRules,inline:""},{default:n(()=>[t(b,{value:"book",class:"mr-4"},{label:n(()=>[e("div",null,[ue,ce,e("div",null,[e("span",me,"Max Pages: "+p(this.config.PrintingRequirements.book.MaxPages),1)])])]),_:1}),t(b,{value:"newspaper",class:"mr-4"},{label:n(()=>[e("div",null,[pe,ge,e("div",null,[e("span",_e,"Max Pages: "+p(this.config.PrintingRequirements.newspaper.MaxPages),1)])])]),_:1}),t(b,{value:"card",class:"mr-4"},{label:n(()=>[e("div",null,[fe,he,e("div",null,[e("span",ve,"Max Pages: "+p(this.config.PrintingRequirements.card.MaxPages),1)])])]),_:1})]),_:1},8,["modelValue","rules"]),t(y,{class:"mb-5"}),be,t(V,{modelValue:i.createArrangement,"onUpdate:modelValue":r[2]||(r[2]=a=>i.createArrangement=a),rules:i.createArrangementRules},{default:n(()=>[t(b,{value:"VerticalInfinite",class:"mb-2"},{label:n(()=>[xe]),_:1}),t(b,{value:"HorizontalOnePage",class:"mb-2",disabled:i.createType=="card"},{label:n(()=>[ye]),_:1},8,["disabled"]),t(b,{value:"HorizontalTwoPage",class:"mb-2",disabled:i.createType=="card"},{label:n(()=>[we]),_:1},8,["disabled"])]),_:1},8,["modelValue","rules"]),t(u,{variant:"tonal",type:"submit"},{default:n(()=>[_(" Confirm ")]),_:1})]),_:1},8,["onSubmit"])])):f("",!0),i.viewCreateDetailsAndPages?(m(),g("div",Pe,[e("div",null,[t(w,{ref:"formCreate","validate-on":"submit",onSubmit:T(l.publish,["prevent"])},{default:n(()=>[ke,t(x,{modelValue:i.printableTitle,"onUpdate:modelValue":r[3]||(r[3]=a=>i.printableTitle=a),color:"primary",label:"Title",variant:"underlined",rules:i.printableTitleRules},null,8,["modelValue","rules"]),t(x,{modelValue:i.printableDescription,"onUpdate:modelValue":r[4]||(r[4]=a=>i.printableDescription=a),color:"primary",label:"Description",variant:"underlined",rules:i.printableDescriptionRules},null,8,["modelValue","rules"]),e("div",Ae,[t(U,{lines:"three","item-props":"","max-height":"400px","min-height":"200px",rules:s.pagesRules},{default:n(()=>[(m(!0),g(E,null,K(i.pages,a=>(m(),H(D,{key:a.index},{prepend:n(()=>[e("div",Ce,[e("div",Te,"Page "+p(a.index),1),e("div",Ve,[e("img",{src:a.url,class:"list-pages-page-item-thumb"},null,8,Re)])])]),_:2},1024))),128))]),_:1},8,["rules"]),this.pages.length<this.maxNumPages?(m(),g("div",Ne,[t(u,{"prepend-icon":"mdi-plus",text:"Add Page",variant:"outlined",onClick:r[5]||(r[5]=a=>this.dialogAddPage=!0)})])):f("",!0)]),e("div",Ee,[t(u,{color:"surface-variant",text:"Publish",variant:"flat",type:"submit"})])]),_:1},8,["onSubmit"]),t(I,{width:"auto",scrollable:"",persistent:"",onKeydown:r[9]||(r[9]=z(a=>this.dialogAddPage=!1,["esc"])),modelValue:i.dialogAddPage,"onUpdate:modelValue":r[10]||(r[10]=a=>i.dialogAddPage=a)},{default:n(()=>[t(w,{ref:"formCreateAddPage","validate-on":"submit",onSubmit:T(l.addPage,["prevent"])},{default:n(()=>[t(B,{"prepend-icon":"mdi-plus",title:"Add Page"},{default:n(()=>[t(y,{class:"mt-1 mb-1"}),t(S,{class:"px-4",style:{width:"400px"}},{default:n(()=>[t(x,{label:"Image URL",modelValue:i.formAddPage.url,"onUpdate:modelValue":r[6]||(r[6]=a=>i.formAddPage.url=a),rules:i.pageUrlRules},null,8,["modelValue","rules"]),t(x,{label:"Alt Text",modelValue:i.formAddPage.alt,"onUpdate:modelValue":r[7]||(r[7]=a=>i.formAddPage.alt=a),rules:i.pageAltTextRules},null,8,["modelValue","rules"])]),_:1}),t(y,{class:"mt-1"}),t(q,{class:"ma-1"},{default:n(()=>[t(u,{text:"Close",onClick:r[8]||(r[8]=a=>this.dialogAddPage=!1)}),t(L),t(u,{color:"surface-variant",text:"Add",variant:"flat",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"]),e("div",De,p(this.pages.length)+" pages total",1)])])):f("",!0)]),_:1})]),_:1})]),_:1})])])])):f("",!0),i.viewPrintExisting?(m(),g("div",Ue,[e("div",Se,[e("div",Le,[t(u,{variant:"text",onClick:r[11]||(r[11]=a=>l.fireEvent("closeAll"))},{default:n(()=>[_("x")]),_:1})]),e("div",qe,[t(R,{class:"ma-5 w-auto pl-10 pr-11 py-3"},{default:n(()=>[t(v,null,{default:n(()=>[t(h,{"align-self":"center"},{default:n(()=>[Be]),_:1})]),_:1}),t(v,null,{default:n(()=>[t(h,null,{default:n(()=>[Ie]),_:1})]),_:1}),t(v,null,{default:n(()=>[t(h,{"max-height":"400px","min-height":"200px"},{default:n(()=>[Oe,e("div",null,[t(O,{modelValue:i.tab,"onUpdate:modelValue":r[12]||(r[12]=a=>i.tab=a),"bg-color":"deep-purple-darken-4","align-tabs":"center"},{default:n(()=>[t(P,{value:"books"},{default:n(()=>[_("Books")]),_:1}),t(P,{value:"newspapers"},{default:n(()=>[_("Newspapers")]),_:1}),t(P,{value:"cards"},{default:n(()=>[_("Cards")]),_:1})]),_:1},8,["modelValue"]),t(M,{modelValue:i.tab,"onUpdate:modelValue":r[13]||(r[13]=a=>i.tab=a)},{default:n(()=>[t(C,{value:"books"},{default:n(()=>[this.config?(m(),g("div",Me,[e("span",Fe,p(this.config.PrintingRequirements.book.RecipeText),1)])):f("",!0),t(A,{items:i.existingBooks,headers:i.headers,"item-key":"id","sort-by":[{key:"title",order:"asc"}],class:"print-data-table"},{"item.controls":n(a=>[t(u,{class:"mx-2",fab:"",dark:"",small:"",color:"grey-darken-4",onClick:N=>l.printExisting(a.item)},{default:n(()=>[t(k,{dark:""},{default:n(()=>[_("mdi-cube-send")]),_:1})]),_:2},1032,["onClick"])]),"item.dateCreated":n(({item:a})=>[e("span",null,p(l.format(a.dateCreated,"en_US")),1)]),_:1},8,["items","headers"])]),_:1}),t(C,{value:"newspapers"},{default:n(()=>[this.config?(m(),g("div",Ke,[e("span",ze,p(this.config.PrintingRequirements.newspaper.RecipeText),1)])):f("",!0),t(A,{items:i.existingNewspapers,headers:i.headers,"item-key":"id","sort-by":[{key:"title",order:"asc"}],class:"print-data-table"},{"item.controls":n(a=>[t(u,{class:"mx-2",fab:"",dark:"",small:"",color:"grey-darken-4",onClick:N=>l.printExisting(a.item)},{default:n(()=>[t(k,{dark:""},{default:n(()=>[_("mdi-cube-send")]),_:1})]),_:2},1032,["onClick"])]),"item.dateCreated":n(({item:a})=>[e("span",null,p(l.format(a.dateCreated,"en_US")),1)]),_:1},8,["items","headers"])]),_:1}),t(C,{value:"cards"},{default:n(()=>[this.config?(m(),g("div",He,[e("span",je,p(this.config.PrintingRequirements.card.RecipeText),1)])):f("",!0),t(A,{items:i.existingCards,headers:i.headers,"item-key":"id","sort-by":[{key:"title",order:"asc"}],class:"print-data-table"},{"item.controls":n(a=>[t(u,{class:"mx-2",fab:"",dark:"",small:"",color:"grey-darken-4",onClick:N=>l.printExisting(a.item)},{default:n(()=>[t(k,{dark:""},{default:n(()=>[_("mdi-cube-send")]),_:1})]),_:2},1032,["onClick"])]),"item.dateCreated":n(({item:a})=>[e("span",null,p(l.format(a.dateCreated,"en_US")),1)]),_:1},8,["items","headers"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1})])])])):f("",!0)])],64)}const Je=Z(ee,[["render",Ge]]);const We={dark:!1,colors:{background:"transparent",surface:"#000000",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}},Ye=j({components:J,directives:W,theme:{defaultTheme:"myCustomDarkTheme",themes:{myCustomDarkTheme:We}}});G(Je).use(Ye).mount("#app");
